import{$ as e}from"./jquery-e7e79cb6.js";import{H as n,r as c,G as l}from"./header-2683a784.js";import{A as o}from"./sidebar-242dd08d.js";import{C as a,c as k}from"./card-a352336d.js";new n("#wrapper");new o("wrapper","ГЛАВНАЯ");class d{disLikeBtn;likeBtn;constructor(){this.disLikeBtn=e(".tour__likes-btn_dislike"),this.likeBtn=e(".tour__likes-btn_like"),this.init()}init(){this.renderCard(),this.clickHandlersLike(),this.updateMainNewsLike(),this.clickHandlersDisLike(),this.updateMainNewsDisLike()}async renderCard(){try{const t=(await c("https://battle-star-app.onrender.com/graphql",l)).cardNews?.data[0]?.attributes?.card??"Error";if(Array.isArray(t)){const r=t.map(s=>({img:s?.img?.data[0].attributes?.url,title:s?.title,text:s?.text,author:s?.autor,date:s?.data,avatar:s?.avatar?.data[0].attributes?.url}));new a(".card",r)}else throw new Error("newsArr is not an array")}catch(i){console.error(i),new a(".card",k)}}clickHandlersLike(){this.likeBtn.on("click",function(){const i=e(this).data("id");console.log(i);let t=localStorage.getItem(`clickLike_${i}`);t||(t="0"),t=String(+t+1),localStorage.setItem(`clickLike_${i}`,t),e(this).find(".news__likes-number").text(t)})}updateMainNewsLike(){this.likeBtn.each(function(){const i=e(this).data("id"),t=localStorage.getItem(`clickLike_${i}`);t&&e(this).find(".news__likes-number").text(t)})}clickHandlersDisLike(){this.disLikeBtn.on("click",function(){const i=e(this).data("id");console.log(i);let t=localStorage.getItem(`clickDisLike_${i}`);t||(t="0"),t=String(+t+1),localStorage.setItem(`clickDisLike_${i}`,t),e(this).find(".news__likes-num").text(t)})}updateMainNewsDisLike(){this.disLikeBtn.each(function(){const i=e(this).data("id"),t=localStorage.getItem(`clickDisLike_${i}`);t&&e(this).find(".news__likes-num").text(t)})}}new d;
