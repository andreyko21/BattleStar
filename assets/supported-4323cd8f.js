import"./jquery-62de4648.js";import{a as r}from"./accordeon-e3be843d.js";import{r as s,a2 as t,H as i}from"./header-4ffbce13.js";import{L as l}from"./lava-lamp-05022cec.js";import{A as o}from"./sidebar-1114d44a.js";import{B as u}from"./tabs-18cd2ba9.js";import{J as m}from"./just-validate.es-936cb47b.js";class c{validation;form;email=null;userName=null;message=null;params={userName:"",userEmail:"",Message:""};constructor(e){if(this.form=document.querySelector(`#${e}`),this.validation=new m("#feedback",{validateBeforeSubmitting:!0,errorFieldCssClass:"feedback__input-error"}),!this.form)throw new Error(`Container with id #${e} not found.`);this.getFormFilds(),this.initValidation()}async createRequest(){const e="https://battle-star-app.onrender.com/graphql";try{await s(e,t,this.params,{Authorization:"Bearer 9c9bf4554f3ecfed253aca7329b2c46511bf3c9b58d2b9a865d9998c75062aab17b1ad96c3c5d878b4aac951441353b066b95b7b20fbd4f31c5466fe8d2479b775f1a398d92e53cfa2e89141d61ee1f32b4850a2daaaebbcf75d3a510bc7e2a3e8613f71c4c84bf7e109f00e2629c12aae3a372fc954fe4de327f478d6857912"})&&this.removeInputValue()}catch(a){console.error(a)}}sendRequest(){this.getData(),this.validation.isValid&&this.createRequest(),this.removeInputValue()}getData(){this.params={userName:this.userName?.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),userEmail:this.email?.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),Message:this.message?.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}}removeInputValue(){this.userName&&(this.userName.value=""),this.email&&(this.email.value=""),this.message&&(this.message.value="")}getFormFilds(){this.form!==null&&(this.email=this.form.querySelector("#email"),this.userName=this.form.querySelector("#user-name"),this.message=this.form.querySelector("#message"))}initValidation(){this.validation.addField("#email",[{rule:"email",errorMessage:"Введіть коректний email"},{rule:"required",errorMessage:"Введіть email"}]).addField("#user-name",[{rule:"minLength",value:3,errorMessage:"Ім'я повинно бути не коротше 3-ох символів"},{rule:"maxLength",value:30,errorMessage:"Ім'я повинно бути не довше 30-ти символів"},{rule:"required",errorMessage:"Введіть ім'я"}]).addField("#message",[{rule:"minLength",value:3,errorMessage:"Повідомлення має містити не менше 3-ох символів"},{rule:"maxLength",value:130,errorMessage:"Повідомлення має містити не більше 130-ти символів"},{rule:"required",errorMessage:"Введіть повідомлення"}]).onSuccess(()=>{this.sendRequest()})}}document.addEventListener("DOMContentLoaded",()=>{new i("#wrapper"),new o("wrapper","МАТЧИ"),new u("frecuent-question__tabs-block"),new l("frecuent-question__tabs-block"),new r("accordion"),new c("feedback")});
