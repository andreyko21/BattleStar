import"./modulepreload-polyfill-3cfb730f.js";import{$ as E,c as Ve,g as Ie}from"./jquery-995cfbaf.js";import{C as Ae,r as De,d as Oe,h as Pe}from"./queries.graphql.d-f9acd4bb.js";import{H as Ne,A as He}from"./sidebar-073b13a8.js";import"./sprite-3002caef.js";import"./dropDownMenu-8d97c7ef.js";import"./windowLocation-a7eb2864.js";const je="/assets/prelouder-b7a6239e.gif";class Be{$container;$preloader;constructor(e){if(this.$container=E(`#${e}`),this.$preloader=E(`<div id="preloader"><img src="${je}" alt="Loading..."></div>`),this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.init()}init(){this.$container.append(this.$preloader),this.hide()}show(){this.$preloader.show()}hide(){this.$preloader.hide()}}class Ge{$container;title;description;buttonText;constructor(e,a,r,s){if(this.$container=E(`#${e}`),this.title=a,this.description=r,this.buttonText=s,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){const e=`
      <div class="tournament-sidebar">
        <div class="tournament-sidebar__info-block">
          <h2 class="tournament-sidebar__info-block-title">${this.title}</h2>
          <p class="tournament-sidebar__info-block-description">${this.description}</p>
          <button class="tournament-sidebar__info-block-button">${this.buttonText}</button>
        </div>
      </div>
    `;this.$container.append(e)}}class Ke{$container;options;selectedMapIds;constructor(e,a){if(this.$container=E(`#${e}`),this.options=a,this.selectedMapIds=[],this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render(),this.attachEventListeners()}render(){const a=`
      <div class="tournament-maps">
        <h2 class="tournament-maps__title tournament-title-h2">
          Выберите карты турнира:
        </h2>
        <div class="tournament-maps__checkboxes" id="tournament-maps__checkboxes">
          ${this.options.map(r=>`
          <input id="map-${r.id}" name="map" type="checkbox" class="tournament-checkbox-input" value="${r.value}" data-id="${r.id}" />
          <label class="tournament-checkbox-label" for="map-${r.id}">
            ${r.imgSrc?`<img src="${r.imgSrc}" alt="${r.label}" class="tournament-map-image">`:""}
            ${r.label}
          </label>
        `).join("")}
        </div>
        <div id="error" class="error"></div>
      </div>
    `;this.$container.append(a)}attachEventListeners(){this.$container.on("change",".tournament-checkbox-input",e=>{const a=E(e.target),r=a.data("id");a.is(":checked")?this.selectedMapIds.push(r):this.selectedMapIds=this.selectedMapIds.filter(s=>s!==r)})}getSelectedMapIds(){return this.selectedMapIds}}var qe=Object.defineProperty,ze=(p,e,a)=>e in p?qe(p,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):p[e]=a,S=(p,e,a)=>(ze(p,typeof e!="symbol"?e+"":e,a),a);const Ue=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,Ye=/^-?[0-9]\d*$/,Re=/^(?=.*[A-Za-z])(?=.*\d).{8,}$/,We=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,Xe=p=>{let e=p;return typeof p=="string"&&(e=p.trim()),!e},Ze=p=>Ue.test(p),Je=(p,e)=>p.length>e,Qe=(p,e)=>p.length<e,et=p=>typeof p!="string"?!1:!isNaN(+p)&&!isNaN(parseFloat(p)),tt=p=>Ye.test(p),it=p=>Re.test(p),st=p=>We.test(p),at=(p,e)=>p>e,rt=(p,e)=>p<e,q=p=>typeof p!="string"||p==="";var F=(p=>(p.Required="required",p.Email="email",p.MinLength="minLength",p.MaxLength="maxLength",p.Password="password",p.Number="number",p.Integer="integer",p.MaxNumber="maxNumber",p.MinNumber="minNumber",p.StrongPassword="strongPassword",p.CustomRegexp="customRegexp",p.MinFilesCount="minFilesCount",p.MaxFilesCount="maxFilesCount",p.Files="files",p))(F||{}),fe=(p=>(p.Required="required",p))(fe||{}),$e=(p=>(p.Label="label",p.LabelArrow="labelArrow",p))($e||{});const be=[{key:F.Required,dict:{en:"The field is required"}},{key:F.Email,dict:{en:"Email has invalid format"}},{key:F.MaxLength,dict:{en:"The field must contain a maximum of :value characters"}},{key:F.MinLength,dict:{en:"The field must contain a minimum of :value characters"}},{key:F.Password,dict:{en:"Password must contain minimum eight characters, at least one letter and one number"}},{key:F.StrongPassword,dict:{en:"Password should contain minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character"}},{key:F.Number,dict:{en:"Value should be a number"}},{key:F.MaxNumber,dict:{en:"Number should be less or equal than :value"}},{key:F.MinNumber,dict:{en:"Number should be more or equal than :value"}},{key:F.MinFilesCount,dict:{en:"Files count should be more or equal than :value"}},{key:F.MaxFilesCount,dict:{en:"Files count should be less or equal than :value"}},{key:F.Files,dict:{en:"Uploaded files have one or several invalid properties (extension/size/type etc)."}}],nt="Value is incorrect",se=p=>typeof p=="object"&&p!==null&&"then"in p&&typeof p.then=="function",ot=p=>{let e=p;const a=[];for(;e;)a.unshift(e),e=e.parentNode;return a},lt=(p,e)=>{const a=[...e].reverse();for(let r=0,s=a.length;r<s;++r){const m=a[r];for(const u in p){const g=p[u];if(g.groupElem===m)return[u,g]}}return null},N=p=>Array.isArray(p)?p.filter(e=>e.length>0):typeof p=="string"&&p.trim()?[...p.split(" ").filter(e=>e.length>0)]:[],ae=p=>p instanceof Element||p instanceof HTMLDocument,ht=".just-validate-error-label[data-tooltip=true]{position:fixed;padding:4px 8px;background:#423f3f;color:#fff;white-space:nowrap;z-index:10;border-radius:4px;transform:translateY(-5px)}.just-validate-error-label[data-tooltip=true]:before{content:'';width:0;height:0;border-left:solid 5px transparent;border-right:solid 5px transparent;border-bottom:solid 5px #423f3f;position:absolute;z-index:3;display:block;bottom:-5px;transform:rotate(180deg);left:calc(50% - 5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]{transform:translateX(-5px)}.just-validate-error-label[data-tooltip=true][data-direction=left]:before{right:-7px;bottom:auto;left:auto;top:calc(50% - 2px);transform:rotate(90deg)}.just-validate-error-label[data-tooltip=true][data-direction=right]{transform:translateX(5px)}.just-validate-error-label[data-tooltip=true][data-direction=right]:before{right:auto;bottom:auto;left:-7px;top:calc(50% - 2px);transform:rotate(-90deg)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]{transform:translateY(5px)}.just-validate-error-label[data-tooltip=true][data-direction=bottom]:before{right:auto;bottom:auto;left:calc(50% - 5px);top:-5px;transform:rotate(0)}",he=5,pe={errorFieldStyle:{color:"#b81111",border:"1px solid #B81111"},errorFieldCssClass:"just-validate-error-field",successFieldCssClass:"just-validate-success-field",errorLabelStyle:{color:"#b81111"},errorLabelCssClass:"just-validate-error-label",successLabelCssClass:"just-validate-success-label",focusInvalidField:!0,lockForm:!0,testingMode:!1,validateBeforeSubmitting:!1,submitFormAutomatically:!1};class dt{constructor(e,a,r){S(this,"form",null),S(this,"fields",{}),S(this,"groupFields",{}),S(this,"errors",{}),S(this,"isValid",!1),S(this,"isSubmitted",!1),S(this,"globalConfig",pe),S(this,"errorLabels",{}),S(this,"successLabels",{}),S(this,"eventListeners",[]),S(this,"dictLocale",be),S(this,"currentLocale","en"),S(this,"customStyleTags",{}),S(this,"onSuccessCallback"),S(this,"onFailCallback"),S(this,"onValidateCallback"),S(this,"tooltips",[]),S(this,"lastScrollPosition"),S(this,"isScrollTick"),S(this,"fieldIds",new Map),S(this,"getKeyByFieldSelector",s=>this.fieldIds.get(s)),S(this,"getFieldSelectorByKey",s=>{for(const[m,u]of this.fieldIds)if(s===u)return m}),S(this,"getCompatibleFields",()=>{const s={};return Object.keys(this.fields).forEach(m=>{let u=m;const g=this.getFieldSelectorByKey(m);typeof g=="string"&&(u=g),s[u]={...this.fields[m]}}),s}),S(this,"setKeyByFieldSelector",s=>{if(this.fieldIds.has(s))return this.fieldIds.get(s);const m=String(this.fieldIds.size+1);return this.fieldIds.set(s,m),m}),S(this,"refreshAllTooltips",()=>{this.tooltips.forEach(s=>{s.refresh()})}),S(this,"handleDocumentScroll",()=>{this.lastScrollPosition=window.scrollY,this.isScrollTick||(window.requestAnimationFrame(()=>{this.refreshAllTooltips(),this.isScrollTick=!1}),this.isScrollTick=!0)}),S(this,"formSubmitHandler",s=>{s.preventDefault(),this.isSubmitted=!0,this.validateHandler(s)}),S(this,"handleFieldChange",s=>{let m;for(const u in this.fields)if(this.fields[u].elem===s){m=u;break}m&&(this.fields[m].touched=!0,this.validateField(m,!0))}),S(this,"handleGroupChange",s=>{let m;for(const u in this.groupFields)if(this.groupFields[u].elems.find(C=>C===s)){m=u;break}m&&(this.groupFields[m].touched=!0,this.validateGroup(m,!0))}),S(this,"handlerChange",s=>{s.target&&(this.handleFieldChange(s.target),this.handleGroupChange(s.target),this.renderErrors())}),this.initialize(e,a,r)}initialize(e,a,r){if(this.form=null,this.errors={},this.isValid=!1,this.isSubmitted=!1,this.globalConfig=pe,this.errorLabels={},this.successLabels={},this.eventListeners=[],this.customStyleTags={},this.tooltips=[],this.currentLocale="en",typeof e=="string"){const s=document.querySelector(e);if(!s)throw Error(`Form with ${e} selector not found! Please check the form selector`);this.setForm(s)}else if(e instanceof HTMLFormElement)this.setForm(e);else throw Error("Form selector is not valid. Please specify a string selector or a DOM element.");if(this.globalConfig={...pe,...a},r&&(this.dictLocale=[...r,...be]),this.isTooltip()){const s=document.createElement("style");s.textContent=ht,this.customStyleTags[$e.Label]=document.head.appendChild(s),this.addListener("scroll",document,this.handleDocumentScroll)}}getLocalisedString(e,a,r){var s;const m=r??e;let u=(s=this.dictLocale.find(g=>g.key===m))==null?void 0:s.dict[this.currentLocale];if(u||r&&(u=r),u&&a!==void 0)switch(e){case F.MaxLength:case F.MinLength:case F.MaxNumber:case F.MinNumber:case F.MinFilesCount:case F.MaxFilesCount:u=u.replace(":value",String(a))}return u||r||nt}getFieldErrorMessage(e,a){const r=typeof e.errorMessage=="function"?e.errorMessage(this.getElemValue(a),this.fields):e.errorMessage;return this.getLocalisedString(e.rule,e.value,r)}getFieldSuccessMessage(e,a){const r=typeof e=="function"?e(this.getElemValue(a),this.fields):e;return this.getLocalisedString(void 0,void 0,r)}getGroupErrorMessage(e){return this.getLocalisedString(e.rule,void 0,e.errorMessage)}getGroupSuccessMessage(e){if(e.successMessage)return this.getLocalisedString(void 0,void 0,e.successMessage)}setFieldInvalid(e,a){this.fields[e].isValid=!1,this.fields[e].errorMessage=this.getFieldErrorMessage(a,this.fields[e].elem)}setFieldValid(e,a){this.fields[e].isValid=!0,a!==void 0&&(this.fields[e].successMessage=this.getFieldSuccessMessage(a,this.fields[e].elem))}setGroupInvalid(e,a){this.groupFields[e].isValid=!1,this.groupFields[e].errorMessage=this.getGroupErrorMessage(a)}setGroupValid(e,a){this.groupFields[e].isValid=!0,this.groupFields[e].successMessage=this.getGroupSuccessMessage(a)}getElemValue(e){switch(e.type){case"checkbox":return e.checked;case"file":return e.files;default:return e.value}}validateGroupRule(e,a,r){switch(r.rule){case fe.Required:a.every(s=>!s.checked)?this.setGroupInvalid(e,r):this.setGroupValid(e,r)}}validateFieldRule(e,a,r,s=!1){const m=r.value,u=this.getElemValue(a);if(r.plugin){r.plugin(u,this.getCompatibleFields())||this.setFieldInvalid(e,r);return}switch(r.rule){case F.Required:{Xe(u)&&this.setFieldInvalid(e,r);break}case F.Email:{if(q(u))break;Ze(u)||this.setFieldInvalid(e,r);break}case F.MaxLength:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof m!="number"){console.error(`Value for ${r.rule} rule for [${e}] should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(q(u))break;Je(u,m)&&this.setFieldInvalid(e,r);break}case F.MinLength:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof m!="number"){console.error(`Value for ${r.rule} rule for [${e}] should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(q(u))break;Qe(u,m)&&this.setFieldInvalid(e,r);break}case F.Password:{if(q(u))break;it(u)||this.setFieldInvalid(e,r);break}case F.StrongPassword:{if(q(u))break;st(u)||this.setFieldInvalid(e,r);break}case F.Number:{if(q(u))break;et(u)||this.setFieldInvalid(e,r);break}case F.Integer:{if(q(u))break;tt(u)||this.setFieldInvalid(e,r);break}case F.MaxNumber:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof m!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(q(u))break;const g=+u;(Number.isNaN(g)||at(g,m))&&this.setFieldInvalid(e,r);break}case F.MinNumber:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof m!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(q(u))break;const g=+u;(Number.isNaN(g)||rt(g,m))&&this.setFieldInvalid(e,r);break}case F.CustomRegexp:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);return}let g;try{g=new RegExp(m)}catch{console.error(`Value for ${r.rule} rule for [${e}] should be a valid regexp. This field will be always invalid.`),this.setFieldInvalid(e,r);break}const C=String(u);C!==""&&!g.test(C)&&this.setFieldInvalid(e,r);break}case F.MinFilesCount:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof m!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Number.isFinite(u?.length)&&u.length<m){this.setFieldInvalid(e,r);break}break}case F.MaxFilesCount:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);break}if(typeof m!="number"){console.error(`Value for ${r.rule} rule for [${e}] field should be a number. The field will be always invalid.`),this.setFieldInvalid(e,r);break}if(Number.isFinite(u?.length)&&u.length>m){this.setFieldInvalid(e,r);break}break}case F.Files:{if(m===void 0){console.error(`Value for ${r.rule} rule for [${e}] field is not defined. This field will be always invalid.`),this.setFieldInvalid(e,r);return}if(typeof m!="object"){console.error(`Value for ${r.rule} rule for [${e}] field should be an object. This field will be always invalid.`),this.setFieldInvalid(e,r);return}const g=m.files;if(typeof g!="object"){console.error(`Value for ${r.rule} rule for [${e}] field should be an object with files array. This field will be always invalid.`),this.setFieldInvalid(e,r);return}const C=(D,v)=>{const M=Number.isFinite(v.minSize)&&D.size<v.minSize,L=Number.isFinite(v.maxSize)&&D.size>v.maxSize,H=Array.isArray(v.names)&&!v.names.includes(D.name),I=Array.isArray(v.extensions)&&!v.extensions.includes(D.name.split(".")[D.name.split(".").length-1]),T=Array.isArray(v.types)&&!v.types.includes(D.type);return M||L||H||I||T};if(typeof u=="object"&&u!==null)for(let D=0,v=u.length;D<v;++D){const M=u.item(D);if(!M){this.setFieldInvalid(e,r);break}if(C(M,g)){this.setFieldInvalid(e,r);break}}break}default:{if(typeof r.validator!="function"){console.error(`Validator for custom rule for [${e}] field should be a function. This field will be always invalid.`),this.setFieldInvalid(e,r);return}const g=r.validator(u,this.getCompatibleFields());if(typeof g!="boolean"&&typeof g!="function"&&console.error(`Validator return value for [${e}] field should be boolean or function. It will be cast to boolean.`),typeof g=="function")if(s)this.fields[e].asyncCheckPending=!0;else{this.fields[e].asyncCheckPending=!1;const C=g();if(!se(C)){console.error(`Validator function for custom rule for [${e}] field should return a Promise. This field will be always invalid.`),this.setFieldInvalid(e,r);return}return C.then(D=>{D||this.setFieldInvalid(e,r)}).catch(()=>{this.setFieldInvalid(e,r)})}g||this.setFieldInvalid(e,r)}}}isFormValid(){let e=!0;for(let a=0,r=Object.values(this.fields).length;a<r;++a){const s=Object.values(this.fields)[a];if(s.isValid===void 0){e=void 0;break}if(s.isValid===!1){e=!1;break}}for(let a=0,r=Object.values(this.groupFields).length;a<r;++a){const s=Object.values(this.groupFields)[a];if(s.isValid===void 0){e=void 0;break}if(s.isValid===!1){e=!1;break}}return e}validateField(e,a=!1){var r;const s=this.fields[e];s.isValid=!0;const m=[];return[...s.rules].reverse().forEach(u=>{const g=this.validateFieldRule(e,s.elem,u,a);se(g)&&m.push(g)}),s.isValid&&this.setFieldValid(e,(r=s.config)==null?void 0:r.successMessage),Promise.allSettled(m).finally(()=>{var u;a&&((u=this.onValidateCallback)==null||u.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}revalidateField(e){if(typeof e!="string"&&!ae(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const a=this.getKeyByFieldSelector(e);return!a||!this.fields[a]?(console.error("Field not found. Check the field selector."),Promise.reject()):new Promise(r=>{this.validateField(a,!0).finally(()=>{this.clearFieldStyle(a),this.clearFieldLabel(a),this.renderFieldError(a,!0),r(!!this.fields[a].isValid)})})}revalidateGroup(e){if(typeof e!="string"&&!ae(e))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");const a=this.getKeyByFieldSelector(e);return!a||!this.groupFields[a]?(console.error("Group not found. Check the group selector."),Promise.reject()):new Promise(r=>{this.validateGroup(a).finally(()=>{this.clearFieldLabel(a),this.renderGroupError(a,!0),r(!!this.groupFields[a].isValid)})})}validateGroup(e,a=!1){const r=this.groupFields[e],s=[];return[...r.rules].reverse().forEach(m=>{const u=this.validateGroupRule(e,r.elems,m);se(u)&&s.push(u)}),Promise.allSettled(s).finally(()=>{var m;a&&((m=this.onValidateCallback)==null||m.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}))})}focusInvalidField(){for(const e in this.fields){const a=this.fields[e];if(!a.isValid){setTimeout(()=>a.elem.focus(),0);break}}}afterSubmitValidation(e=!1){this.renderErrors(e),this.globalConfig.focusInvalidField&&this.focusInvalidField()}validate(e=!1){return new Promise(a=>{const r=[];Object.keys(this.fields).forEach(s=>{const m=this.validateField(s);se(m)&&r.push(m)}),Object.keys(this.groupFields).forEach(s=>{const m=this.validateGroup(s);se(m)&&r.push(m)}),Promise.allSettled(r).then(()=>{var s;this.afterSubmitValidation(e),(s=this.onValidateCallback)==null||s.call(this,{isValid:this.isFormValid(),isSubmitted:this.isSubmitted,fields:this.getCompatibleFields(),groups:{...this.groupFields}}),a(!!r.length)})})}revalidate(){return new Promise(e=>{this.validateHandler(void 0,!0).finally(()=>{this.globalConfig.focusInvalidField&&this.focusInvalidField(),e(this.isValid)})})}validateHandler(e,a=!1){return this.globalConfig.lockForm&&this.lockForm(),this.validate(a).finally(()=>{var r,s,m;this.globalConfig.lockForm&&this.unlockForm(),this.isValid?((r=this.onSuccessCallback)==null||r.call(this,e),this.globalConfig.submitFormAutomatically&&((s=e?.currentTarget)==null||s.submit())):(m=this.onFailCallback)==null||m.call(this,this.getCompatibleFields(),this.groupFields)})}setForm(e){this.form=e,this.form.setAttribute("novalidate","novalidate"),this.removeListener("submit",this.form,this.formSubmitHandler),this.addListener("submit",this.form,this.formSubmitHandler)}addListener(e,a,r){a.addEventListener(e,r),this.eventListeners.push({type:e,elem:a,func:r})}removeListener(e,a,r){a.removeEventListener(e,r),this.eventListeners=this.eventListeners.filter(s=>s.type!==e||s.elem!==a)}addField(e,a,r){if(typeof e!="string"&&!ae(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");let s;if(typeof e=="string"?s=this.form.querySelector(e):s=e,!s)throw Error("Field doesn't exist in the DOM! Please check the field selector.");if(!Array.isArray(a)||!a.length)throw Error("Rules argument should be an array and should contain at least 1 element.");a.forEach(u=>{if(!("rule"in u||"validator"in u||"plugin"in u))throw Error("Rules argument must contain at least one rule or validator property.");if(!u.validator&&!u.plugin&&(!u.rule||!Object.values(F).includes(u.rule)))throw Error(`Rule should be one of these types: ${Object.values(F).join(", ")}. Provided value: ${u.rule}`)});const m=this.setKeyByFieldSelector(e);return this.fields[m]={elem:s,rules:a,isValid:void 0,touched:!1,config:r},this.setListeners(s),(this.isSubmitted||this.globalConfig.validateBeforeSubmitting)&&this.validateField(m),this}removeField(e){if(typeof e!="string"&&!ae(e))throw Error("Field selector is not valid. Please specify a string selector or a valid DOM element.");const a=this.getKeyByFieldSelector(e);if(!a||!this.fields[a])return console.error("Field not found. Check the field selector."),this;const r=this.getListenerType(this.fields[a].elem.type);return this.removeListener(r,this.fields[a].elem,this.handlerChange),this.clearErrors(),delete this.fields[a],this}removeGroup(e){if(typeof e!="string")throw Error("Group selector is not valid. Please specify a string selector.");const a=this.getKeyByFieldSelector(e);return!a||!this.groupFields[a]?(console.error("Group not found. Check the group selector."),this):(this.groupFields[a].elems.forEach(r=>{const s=this.getListenerType(r.type);this.removeListener(s,r,this.handlerChange)}),this.clearErrors(),delete this.groupFields[a],this)}addRequiredGroup(e,a,r,s){if(typeof e!="string"&&!ae(e))throw Error("Group selector is not valid. Please specify a string selector or a valid DOM element.");let m;if(typeof e=="string"?m=this.form.querySelector(e):m=e,!m)throw Error("Group selector not found! Please check the group selector.");const u=m.querySelectorAll("input"),g=Array.from(u).filter(D=>{const v=lt(this.groupFields,ot(D));return v?v[1].elems.find(M=>M!==D):!0}),C=this.setKeyByFieldSelector(e);return this.groupFields[C]={rules:[{rule:fe.Required,errorMessage:a,successMessage:s}],groupElem:m,elems:g,touched:!1,isValid:void 0,config:r},u.forEach(D=>{this.setListeners(D)}),this}getListenerType(e){switch(e){case"checkbox":case"select-one":case"file":case"radio":return"change";default:return"input"}}setListeners(e){const a=this.getListenerType(e.type);this.removeListener(a,e,this.handlerChange),this.addListener(a,e,this.handlerChange)}clearFieldLabel(e){var a,r;(a=this.errorLabels[e])==null||a.remove(),(r=this.successLabels[e])==null||r.remove()}clearFieldStyle(e){var a,r,s,m;const u=this.fields[e],g=((a=u.config)==null?void 0:a.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(g).forEach(D=>{u.elem.style[D]=""});const C=((r=u.config)==null?void 0:r.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(C).forEach(D=>{u.elem.style[D]=""}),u.elem.classList.remove(...N(((s=u.config)==null?void 0:s.errorFieldCssClass)||this.globalConfig.errorFieldCssClass),...N(((m=u.config)==null?void 0:m.successFieldCssClass)||this.globalConfig.successFieldCssClass))}clearErrors(){var e,a;Object.keys(this.errorLabels).forEach(r=>this.errorLabels[r].remove()),Object.keys(this.successLabels).forEach(r=>this.successLabels[r].remove());for(const r in this.fields)this.clearFieldStyle(r);for(const r in this.groupFields){const s=this.groupFields[r],m=((e=s.config)==null?void 0:e.errorFieldStyle)||this.globalConfig.errorFieldStyle;Object.keys(m).forEach(g=>{s.elems.forEach(C=>{var D;C.style[g]="",C.classList.remove(...N(((D=s.config)==null?void 0:D.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))})});const u=((a=s.config)==null?void 0:a.successFieldStyle)||this.globalConfig.successFieldStyle||{};Object.keys(u).forEach(g=>{s.elems.forEach(C=>{var D;C.style[g]="",C.classList.remove(...N(((D=s.config)==null?void 0:D.successFieldCssClass)||this.globalConfig.successFieldCssClass))})})}this.tooltips=[]}isTooltip(){return!!this.globalConfig.tooltip}lockForm(){const e=this.form.querySelectorAll("input, textarea, button, select");for(let a=0,r=e.length;a<r;++a)e[a].setAttribute("data-just-validate-fallback-disabled",e[a].disabled?"true":"false"),e[a].setAttribute("disabled","disabled"),e[a].style.pointerEvents="none",e[a].style.webkitFilter="grayscale(100%)",e[a].style.filter="grayscale(100%)"}unlockForm(){const e=this.form.querySelectorAll("input, textarea, button, select");for(let a=0,r=e.length;a<r;++a)e[a].getAttribute("data-just-validate-fallback-disabled")!=="true"&&e[a].removeAttribute("disabled"),e[a].style.pointerEvents="",e[a].style.webkitFilter="",e[a].style.filter=""}renderTooltip(e,a,r){var s;const{top:m,left:u,width:g,height:C}=e.getBoundingClientRect(),D=a.getBoundingClientRect(),v=r||((s=this.globalConfig.tooltip)==null?void 0:s.position);switch(v){case"left":{a.style.top=`${m+C/2-D.height/2}px`,a.style.left=`${u-D.width-he}px`;break}case"top":{a.style.top=`${m-D.height-he}px`,a.style.left=`${u+g/2-D.width/2}px`;break}case"right":{a.style.top=`${m+C/2-D.height/2}px`,a.style.left=`${u+g+he}px`;break}case"bottom":{a.style.top=`${m+C+he}px`,a.style.left=`${u+g/2-D.width/2}px`;break}}return a.dataset.direction=v,{refresh:()=>{this.renderTooltip(e,a,r)}}}createErrorLabelElem(e,a,r){const s=document.createElement("div");s.innerHTML=a;const m=this.isTooltip()?r?.errorLabelStyle:r?.errorLabelStyle||this.globalConfig.errorLabelStyle;return Object.assign(s.style,m),s.classList.add(...N(r?.errorLabelCssClass||this.globalConfig.errorLabelCssClass),"just-validate-error-label"),this.isTooltip()&&(s.dataset.tooltip="true"),this.globalConfig.testingMode&&(s.dataset.testId=`error-label-${e}`),this.errorLabels[e]=s,s}createSuccessLabelElem(e,a,r){if(a===void 0)return null;const s=document.createElement("div");s.innerHTML=a;const m=r?.successLabelStyle||this.globalConfig.successLabelStyle;return Object.assign(s.style,m),s.classList.add(...N(r?.successLabelCssClass||this.globalConfig.successLabelCssClass),"just-validate-success-label"),this.globalConfig.testingMode&&(s.dataset.testId=`success-label-${e}`),this.successLabels[e]=s,s}renderErrorsContainer(e,a){const r=a||this.globalConfig.errorsContainer;if(typeof r=="string"){const s=this.form.querySelector(r);if(s)return s.appendChild(e),!0;console.error(`Error container with ${r} selector not found. Errors will be rendered as usual`)}return r instanceof Element?(r.appendChild(e),!0):(r!==void 0&&console.error("Error container not found. It should be a string or existing Element. Errors will be rendered as usual"),!1)}renderGroupLabel(e,a,r,s){!s&&this.renderErrorsContainer(a,r)||e.appendChild(a)}renderFieldLabel(e,a,r,s){var m,u,g,C,D,v,M;if(!(!s&&this.renderErrorsContainer(a,r)))if(e.type==="checkbox"||e.type==="radio"){const L=document.querySelector(`label[for="${e.getAttribute("id")}"]`);((u=(m=e.parentElement)==null?void 0:m.tagName)==null?void 0:u.toLowerCase())==="label"?(C=(g=e.parentElement)==null?void 0:g.parentElement)==null||C.appendChild(a):L?(D=L.parentElement)==null||D.appendChild(a):(v=e.parentElement)==null||v.appendChild(a)}else(M=e.parentElement)==null||M.appendChild(a)}showLabels(e,a){Object.keys(e).forEach((r,s)=>{const m=e[r],u=this.getKeyByFieldSelector(r);if(!u||!this.fields[u]){console.error("Field not found. Check the field selector.");return}const g=this.fields[u];g.isValid=!a,this.clearFieldStyle(u),this.clearFieldLabel(u),this.renderFieldError(u,!1,m),s===0&&this.globalConfig.focusInvalidField&&setTimeout(()=>g.elem.focus(),0)})}showErrors(e){if(typeof e!="object")throw Error("[showErrors]: Errors should be an object with key: value format");this.showLabels(e,!0)}showSuccessLabels(e){if(typeof e!="object")throw Error("[showSuccessLabels]: Labels should be an object with key: value format");this.showLabels(e,!1)}renderFieldError(e,a=!1,r){var s,m,u,g,C,D;const v=this.fields[e];if(v.isValid===!1&&(this.isValid=!1),v.isValid===void 0||!a&&!this.isSubmitted&&!v.touched&&r===void 0)return;if(v.isValid){if(!v.asyncCheckPending){const L=this.createSuccessLabelElem(e,r!==void 0?r:v.successMessage,v.config);L&&this.renderFieldLabel(v.elem,L,(s=v.config)==null?void 0:s.errorsContainer,!0),v.elem.classList.add(...N(((m=v.config)==null?void 0:m.successFieldCssClass)||this.globalConfig.successFieldCssClass))}return}v.elem.classList.add(...N(((u=v.config)==null?void 0:u.errorFieldCssClass)||this.globalConfig.errorFieldCssClass));const M=this.createErrorLabelElem(e,r!==void 0?r:v.errorMessage,v.config);this.renderFieldLabel(v.elem,M,(g=v.config)==null?void 0:g.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(v.elem,M,(D=(C=v.config)==null?void 0:C.tooltip)==null?void 0:D.position))}renderGroupError(e,a=!0){var r,s,m,u;const g=this.groupFields[e];if(g.isValid===!1&&(this.isValid=!1),g.isValid===void 0||!a&&!this.isSubmitted&&!g.touched)return;if(g.isValid){g.elems.forEach(v=>{var M,L;Object.assign(v.style,((M=g.config)==null?void 0:M.successFieldStyle)||this.globalConfig.successFieldStyle),v.classList.add(...N(((L=g.config)==null?void 0:L.successFieldCssClass)||this.globalConfig.successFieldCssClass))});const D=this.createSuccessLabelElem(e,g.successMessage,g.config);D&&this.renderGroupLabel(g.groupElem,D,(r=g.config)==null?void 0:r.errorsContainer,!0);return}this.isValid=!1,g.elems.forEach(D=>{var v,M;Object.assign(D.style,((v=g.config)==null?void 0:v.errorFieldStyle)||this.globalConfig.errorFieldStyle),D.classList.add(...N(((M=g.config)==null?void 0:M.errorFieldCssClass)||this.globalConfig.errorFieldCssClass))});const C=this.createErrorLabelElem(e,g.errorMessage,g.config);this.renderGroupLabel(g.groupElem,C,(s=g.config)==null?void 0:s.errorsContainer),this.isTooltip()&&this.tooltips.push(this.renderTooltip(g.groupElem,C,(u=(m=g.config)==null?void 0:m.tooltip)==null?void 0:u.position))}renderErrors(e=!1){if(!(!this.isSubmitted&&!e&&!this.globalConfig.validateBeforeSubmitting)){this.clearErrors(),this.isValid=!0;for(const a in this.groupFields)this.renderGroupError(a);for(const a in this.fields)this.renderFieldError(a)}}destroy(){this.eventListeners.forEach(e=>{this.removeListener(e.type,e.elem,e.func)}),Object.keys(this.customStyleTags).forEach(e=>{this.customStyleTags[e].remove()}),this.clearErrors(),this.globalConfig.lockForm&&this.unlockForm()}refresh(){this.destroy(),this.form?(this.initialize(this.form,this.globalConfig),Object.keys(this.fields).forEach(e=>{const a=this.getFieldSelectorByKey(e);a&&this.addField(a,[...this.fields[e].rules],this.fields[e].config)})):console.error("Cannot initialize the library! Form is not defined")}setCurrentLocale(e){if(typeof e!="string"&&e!==void 0){console.error("Current locale should be a string");return}this.currentLocale=e,this.isSubmitted&&this.validate()}onSuccess(e){return this.onSuccessCallback=e,this}onFail(e){return this.onFailCallback=e,this}onValidate(e){return this.onValidateCallback=e,this}}const ct="/assets/international-a484802c.png";class ye{$container;placeholder;inputType;inputId;inputName;constructor(e,a,r="text",s,m){if(this.$container=E(`#${e}`),this.placeholder=a,this.inputType=r,this.inputId=s,this.inputName=m,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){const e=`
      <div id="${this.inputId}-container">
        <input class="tournament-input" type="${this.inputType}" id="${this.inputId}" name="${this.inputName}" placeholder="${this.placeholder}" />
        <div class="${this.inputId}-error"></div>
      </div>
    `;this.$container.append(e)}getValue(){return this.$container.find(`#${this.inputId}`).val()}}class ut{$container;$image;imageUrl;altText;formData;constructor(e,a,r=""){if(this.$container=E(`#${e}`),this.imageUrl=a,this.altText=r,this.formData=new FormData,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.initialize()}initialize(){this.renderBanner(),this.attachEventListeners()}renderBanner(){const e=`
      <div class="tournament-banner">
        <img class="tournament-banner__img" src="${this.imageUrl}" alt="${this.altText}" />
        <label class="tournament-banner__button" for="loadBanner">
          <input id="loadBanner" type="file" style="display: none;" />
          <svg class="tournament-banner__button-svg">
            <use xlink:href="src/images/sprite.svg#image"></use>
          </svg>
          Изменить
        </label>
      </div>
    `;this.$container.html(e),this.$image=this.$container.find(".tournament-banner__img")}attachEventListeners(){this.$container.find("#loadBanner").on("change",this.handleFileChange.bind(this))}handleFileChange(e){const a=e.target,r=a.files?a.files[0]:null;if(r&&this.isValidImageType(r)){const s=new FileReader;s.onload=()=>{const m=s.result;this.updateImage(m)},s.readAsDataURL(r),this.formData.delete("image"),this.formData.append("image",r)}else alert("Недопустимий формат файлу. Будь ласка, виберіть JPEG або PNG.")}isValidImageType(e){return["image/jpeg","image/png"].includes(e.type)}updateImage(e){this.imageUrl=e,this.$image.attr("src",this.imageUrl)}getFormData(){return this.formData}}class mt{$container;options;constructor(e,a){if(this.$container=E(`#${e}`),this.options=a,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){const a=`
      <div class="tournament-numbers-teams">
        <h2 class="tournament-numbers-teams__title tournament-title-h2">
          Количество команд
        </h2>
        <p class="tournament-numbers-teams__description tournament-description">
          Равным образом реализация намеченных плановых заданий способствует подготовки и реализации соответствующий условий активизации.
        </p>
        <div class="tournament-numbers-teams__buttons" id="tournament-numbers-teams__buttons">
          ${this.options.map((r,s)=>`
          <input id="numbersTeams${s+1}" name="numbersTeams" type="radio" class="tournament-radio-input" value="${r}" />
          <label class="tournament-radio-label" for="numbersTeams${s+1}">
            ${r}
          </label>
        `).join("")}
        </div>
        <div class="tournament-numbers-teams-error" id="tournament-numbers-teams-error">
        </div>
      </div>
    `;this.$container.append(a)}getSelectedValue(){const e=this.$container.find("input[name='numbersTeams']:checked").val();return e?parseInt(e,10):null}}class pt{$container;options;constructor(e,a){if(this.$container=E(`#${e}`),this.options=a,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render(),this.attachEventHandlers()}render(){const a=`
      <div class="tournament-entry-rate">
        <h2 class="tournament-entry-rate__title tournament-title-h2">
          Ставка входа
        </h2>
        <p class="tournament-entry-rate__description tournament-description">
          Равным образом реализация намеченных плановых заданий способствует подготовки и реализации соответствующий условий активизации.
        </p>
        <div class="tournament-entry-rate__controls">
          <div class="tournament-entry-rate__buttons">
            ${this.options.map((r,s)=>`
          <input id="entryRate${s+1}" name="entryRate" type="radio" class="tournament-radio-input" value="${r.value}" />
          <label class="tournament-radio-label" for="entryRate${s+1}">
            ${r.label}
          </label>
        `).join("")}
          </div>
          <div class="tournament-entry-rate__line"></div>
          <input
            class="tournament-entry-rate__input"
            type="text"
            id="tournamentEntryRateInput"
            name="tournamentEntryRateInput"
            placeholder="Введите свое значение.."
          />
        </div>
      </div>
    `;this.$container.append(a)}attachEventHandlers(){const e=this.$container.find(".tournament-entry-rate__input"),a=6;this.$container.find(".tournament-entry-rate__buttons").find(".tournament-radio-input").on("change",()=>{e.val("")}),e.on("input",r=>{const s=E(r.currentTarget);let m=s.val();m=m.replace(/[^0-9]/g,"").substring(0,a),s.val(m),m&&this.$container.find(".tournament-entry-rate__buttons").find(".tournament-radio-input").prop("checked",!1)})}getSelectedValue(){const e=this.$container.find("input[name='entryRate']:checked").val(),a=this.$container.find("#tournamentEntryRateInput").val();return e||a}}var Ce={exports:{}};(function(p,e){(function(a,r){p.exports=r()})(Ve,function(){return function(){var a={d:function(c,t){for(var n in t)a.o(t,n)&&!a.o(c,n)&&Object.defineProperty(c,n,{enumerable:!0,get:t[n]})},o:function(c,t){return Object.prototype.hasOwnProperty.call(c,t)}},r={};a.d(r,{default:function(){return G}});var s={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},m={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:s.days,minView:s.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function u(c){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document;return typeof c=="string"?t.querySelector(c):c}function g(){let{tagName:c="div",className:t="",innerHtml:n="",id:i="",attrs:h={}}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=document.createElement(c);return t&&l.classList.add(...t.split(" ")),i&&(l.id=i),n&&(l.innerHTML=n),h&&C(l,h),l}function C(c,t){for(let[n,i]of Object.entries(t))i!==void 0&&c.setAttribute(n,i);return c}function D(c){return new Date(c.getFullYear(),c.getMonth()+1,0).getDate()}function v(c){let t=c.getHours(),{hours:n,dayPeriod:i}=M(t);return{year:c.getFullYear(),month:c.getMonth(),fullMonth:c.getMonth()+1<10?"0"+(c.getMonth()+1):c.getMonth()+1,date:c.getDate(),fullDate:c.getDate()<10?"0"+c.getDate():c.getDate(),day:c.getDay(),hours:t,fullHours:L(t),hours12:n,dayPeriod:i,fullHours12:L(n),minutes:c.getMinutes(),fullMinutes:c.getMinutes()<10?"0"+c.getMinutes():c.getMinutes()}}function M(c){return{dayPeriod:c>11?"pm":"am",hours:c%12==0?12:c%12}}function L(c){return c<10?"0"+c:c}function H(c){let t=10*Math.floor(c.getFullYear()/10);return[t,t+9]}function I(){let c=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach(h=>{if(typeof h=="object")for(let l in h)h[l]&&c.push(l);else h&&c.push(h)}),c.join(" ")}function T(c,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:s.days;if(!c||!t)return!1;let i=v(c),h=v(t);return{[s.days]:i.date===h.date&&i.month===h.month&&i.year===h.year,[s.months]:i.month===h.month&&i.year===h.year,[s.years]:i.year===h.year}[n]}function j(c,t,n){let i=de(c,!1).getTime(),h=de(t,!1).getTime();return n?i>=h:i>h}function Z(c,t){return!j(c,t,!0)}function de(c){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=new Date(c.getTime());return typeof t!="boolean"||t||function(i){i.setHours(0,0,0,0)}(n),n}function V(c,t,n){c.length?c.forEach(i=>{i.addEventListener(t,n)}):c.addEventListener(t,n)}function te(c,t){return!(!c||c===document||c instanceof DocumentFragment)&&(c.matches(t)?c:te(c.parentNode,t))}function J(c,t,n){return c>n?n:c<t?t:c}function re(c){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.filter(h=>h).forEach(h=>{for(let[l,o]of Object.entries(h))if(o!==void 0&&o.toString()==="[object Object]"){let d=c[l]!==void 0?c[l].toString():void 0,f=o.toString(),b=Array.isArray(o)?[]:{};c[l]=c[l]?d!==f?b:c[l]:b,re(c[l],o)}else c[l]=o}),c}function P(c){let t=c;return c instanceof Date||(t=new Date(c)),isNaN(t.getTime())&&(console.log(`Unable to convert value "${c}" to Date object`),t=!1),t}function ce(c){let t="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+t+")("+c+")($|<|"+t+")","g")}function U(c,t,n){return(t=function(i){var h=function(l,o){if(typeof l!="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,"string");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i);return typeof h=="symbol"?h:String(h)}(t))in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}class _e{constructor(){let{type:t,date:n,dp:i,opts:h,body:l}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};U(this,"focus",()=>{this.$cell.classList.add("-focus-"),this.focused=!0}),U(this,"removeFocus",()=>{this.$cell.classList.remove("-focus-"),this.focused=!1}),U(this,"select",()=>{this.$cell.classList.add("-selected-"),this.selected=!0}),U(this,"removeSelect",()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1}),U(this,"onChangeSelectedDate",()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())}),U(this,"onChangeFocusDate",o=>{if(!o)return void(this.focused&&this.removeFocus());let d=T(o,this.date,this.type);d?this.focus():!d&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()}),U(this,"render",()=>(this.$cell.innerHTML=this._getHtml(),this.$cell.adpCell=this,this.$cell)),this.type=t,this.singleType=this.type.slice(0,-1),this.date=n,this.dp=i,this.opts=h,this.body=l,this.customData=!1,this.init()}init(){let{range:t,onRenderCell:n}=this.opts;n&&(this.customData=n({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),t&&this._handleRangeStatus())}_bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var t;let{year:n,month:i,date:h}=v(this.date),l=((t=this.customData)===null||t===void 0?void 0:t.attrs)||{};this.$cell=g({className:this._getClassName(),attrs:{"data-year":n,"data-month":i,"data-date":h,...l}})}_getClassName(){var t,n;let i=new Date,{selectOtherMonths:h,selectOtherYears:l}=this.opts,{minDate:o,maxDate:d}=this.dp,{day:f}=v(this.date),b=this._isOutOfMinMaxRange(),y=(t=this.customData)===null||t===void 0?void 0:t.disabled,w=I("air-datepicker-cell",`-${this.singleType}-`,{"-current-":T(i,this.date,this.type),"-min-date-":o&&T(o,this.date,this.type),"-max-date-":d&&T(d,this.date,this.type)}),$="";switch(this.type){case s.days:$=I({"-weekend-":this.dp.isWeekend(f),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!h||b||y});break;case s.months:$=I({"-disabled-":b||y});break;case s.years:$=I({"-other-decade-":this.isOtherDecade,"-disabled-":b||this.isOtherDecade&&!l||y})}return I(w,$,(n=this.customData)===null||n===void 0?void 0:n.classes)}_getHtml(){var t;let{year:n,month:i,date:h}=v(this.date),{showOtherMonths:l,showOtherYears:o}=this.opts;if((t=this.customData)!==null&&t!==void 0&&t.html)return this.customData.html;switch(this.type){case s.days:return!l&&this.isOtherMonth?"":h;case s.months:return this.dp.locale[this.opts.monthsField][i];case s.years:return!o&&this.isOtherDecade?"":n}}_isOutOfMinMaxRange(){let{minDate:t,maxDate:n}=this.dp,{type:i,date:h}=this,{month:l,year:o,date:d}=v(h),f=i===s.days,b=i===s.years,y=!!t&&new Date(o,b?t.getMonth():l,f?d:t.getDate()),w=!!n&&new Date(o,b?n.getMonth():l,f?d:n.getDate());return t&&n?Z(y,t)||j(w,n):t?Z(y,t):n?j(w,n):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){let{rangeDateFrom:t,rangeDateTo:n}=this.dp,i=I({"-in-range-":t&&n&&(h=this.date,l=t,o=n,j(h,l)&&Z(h,o)),"-range-from-":t&&T(this.date,t,this.type),"-range-to-":n&&T(this.date,n,this.type)});var h,l,o;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),i&&this.$cell.classList.add(...i.split(" "))}_handleSelectedStatus(){let t=this.dp._checkIfDateIsSelected(this.date,this.type);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){T(this.dp.focusDate,this.date,this.type)&&this.focus()}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function A(c,t,n){return(t=function(i){var h=function(l,o){if(typeof l!="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,"string");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i);return typeof h=="symbol"?h:String(h)}(t))in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}let Se={[s.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${s.days}-"></div>`,[s.months]:`<div class="air-datepicker-body--cells -${s.months}-"></div>`,[s.years]:`<div class="air-datepicker-body--cells -${s.years}-"></div>`};const ie=".air-datepicker-cell";class z{constructor(t){let{dp:n,type:i,opts:h}=t;A(this,"handleClick",l=>{let o=l.target.closest(ie).adpCell;if(o.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let d=this.dp._checkIfDateIsSelected(o.date,o.type);d?this.dp._handleAlreadySelectedDates(d,o.date):this.dp.selectDate(o.date)}),A(this,"handleDayNameClick",l=>{let o=l.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(o),datepicker:this.dp})}),A(this,"onChangeCurrentView",l=>{l!==this.type?this.hide():(this.show(),this.render())}),A(this,"onMouseOverCell",l=>{let o=te(l.target,ie);this.dp.setFocusDate(!!o&&o.adpCell.date)}),A(this,"onMouseOutCell",()=>{this.dp.setFocusDate(!1)}),A(this,"onClickBody",l=>{let{onClickDayName:o}=this.opts,d=l.target;d.closest(ie)&&this.handleClick(l),o&&d.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(l)}),A(this,"onMouseDown",l=>{this.pressed=!0;let o=te(l.target,ie),d=o&&o.adpCell;T(d.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),T(d.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)}),A(this,"onMouseMove",l=>{if(!this.pressed||!this.dp.isMinViewReached)return;l.preventDefault();let o=te(l.target,ie),d=o&&o.adpCell,{selectedDates:f,rangeDateTo:b,rangeDateFrom:y}=this.dp;if(!d||d.isDisabled)return;let{date:w}=d;if(f.length===2){if(this.rangeFromFocused&&!j(w,b)){let{hours:$,minutes:k}=v(y);w.setHours($),w.setMinutes(k),this.dp.rangeDateFrom=w,this.dp.replaceDate(y,w)}if(this.rangeToFocused&&!Z(w,y)){let{hours:$,minutes:k}=v(b);w.setHours($),w.setMinutes(k),this.dp.rangeDateTo=w,this.dp.replaceDate(b,w)}}}),A(this,"onMouseUp",()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1}),A(this,"onChangeViewDate",(l,o)=>{if(!this.isVisible)return;let d=H(l),f=H(o);switch(this.dp.currentView){case s.days:if(T(l,o,s.months))return;break;case s.months:if(T(l,o,s.years))return;break;case s.years:if(d[0]===f[0]&&d[1]===f[1])return}this.render()}),A(this,"render",()=>{this.destroyCells(),this._generateCells(),this.cells.forEach(l=>{this.$cells.appendChild(l.render())})}),this.dp=n,this.type=i,this.opts=h,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===s.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:t,dynamicRange:n}=this.opts;V(this.$el,"mouseover",this.onMouseOverCell),V(this.$el,"mouseout",this.onMouseOutCell),V(this.$el,"click",this.onClickBody),t&&n&&(V(this.$el,"mousedown",this.onMouseDown),V(this.$el,"mousemove",this.onMouseMove),V(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=g({className:`air-datepicker-body -${this.type}-`,innerHtml:Se[this.type]}),this.$names=u(".air-datepicker-body--day-names",this.$el),this.$cells=u(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.dp.locale.firstDay,n="",i=this.dp.isWeekend,{onClickDayName:h}=this.opts,l=t,o=0;for(;o<7;){let d=l%7;n+=`<div class="${I("air-datepicker-body--day-name",{[s.cssClassWeekend]:i(d),"-clickable-":!!h})}" data-day-index='${d}'>${this.dp.locale.daysMin[d]}</div>`,o++,l++}return n}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(t){let{type:n,dp:i,opts:h}=this;return new _e({type:n,dp:i,opts:h,date:t,body:this})}_generateCells(){z.getDatesFunction(this.type)(this.dp,t=>{this.cells.push(this._generateCell(t))})}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach(t=>t.destroy()),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(t,n){let{viewDate:i,locale:{firstDay:h}}=t,l=D(i),{year:o,month:d}=v(i),f=new Date(o,d,1),b=new Date(o,d,l),y=f.getDay()-h,w=6-b.getDay()+h;y=y<0?y+7:y,w=w>6?w-7:w;let $=function(K,oe){let{year:me,month:le,date:xe}=v(K);return new Date(me,le,xe-oe)}(f,y),k=l+y+w,O=$.getDate(),{year:x,month:ne}=v($),X=0;const ee=[];for(;X<k;){let K=new Date(x,ne,O+X);n&&n(K),ee.push(K),X++}return ee}static getMonthsDates(t,n){let{year:i}=t.parsedViewDate,h=0,l=[];for(;h<12;){const o=new Date(i,h);l.push(o),n&&n(o),h++}return l}static getYearsDates(t,n){let i=H(t.viewDate),h=i[0]-1,l=i[1]+1,o=h,d=[];for(;o<=l;){const f=new Date(o,0);d.push(f),n&&n(f),o++}return d}static getDatesFunction(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.days;return{[s.days]:z.getDaysDates,[s.months]:z.getMonthsDates,[s.years]:z.getYearsDates}[t]}}function Y(c,t,n){return(t=function(i){var h=function(l,o){if(typeof l!="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,"string");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i);return typeof h=="symbol"?h:String(h)}(t))in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}class ke{constructor(t){let{dp:n,opts:i}=t;Y(this,"onClickNav",h=>{let l=te(h.target,".air-datepicker-nav--action");if(!l)return;let o=l.dataset.action;this.dp[o]()}),Y(this,"onChangeViewDate",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),Y(this,"onChangeCurrentView",()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()}),Y(this,"onClickNavTitle",()=>{this.dp.isFinalView||this.dp.up()}),Y(this,"update",()=>{let{prevHtml:h,nextHtml:l}=this.opts;this.$prev.innerHTML=h,this.$next.innerHTML=l,this._resetNavStatus(),this.render(),this.handleNavStatus()}),Y(this,"renderDelay",()=>{setTimeout(this.render)}),Y(this,"render",()=>{this.$title.innerHTML=this._getTitle(),function(h,l){for(let o in l)l[o]?h.classList.add(o):h.classList.remove(o)}(this.$title,{"-disabled-":this.dp.isFinalView})}),this.dp=n,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=u(".air-datepicker-nav--title",this.$el),this.$prev=u('[data-action="prev"]',this.$el),this.$next=u('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(s.eventChangeViewDate,this.onChangeViewDate),this.dp.on(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(s.eventChangeTime,this.render))}destroy(){this.dp.off(s.eventChangeViewDate,this.onChangeViewDate),this.dp.off(s.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(s.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(s.eventChangeTime,this.render))}_createElement(){this.$el=g({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:t,opts:n}=this,i=n.navTitles[t.currentView];return typeof i=="function"?i(t):t.formatDate(t.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:t}=this.opts,{minDate:n,maxDate:i}=this.dp;if(!n&&!i||!t)return;let{year:h,month:l}=this.dp.parsedViewDate,o=!!n&&v(n),d=!!i&&v(i);switch(this.dp.currentView){case s.days:n&&o.month>=l&&o.year>=h&&this._disableNav("prev"),i&&d.month<=l&&d.year<=h&&this._disableNav("next");break;case s.months:n&&o.year>=h&&this._disableNav("prev"),i&&d.year<=h&&this._disableNav("next");break;case s.years:{let f=H(this.dp.viewDate);n&&o.year>=f[0]&&this._disableNav("prev"),i&&d.year<=f[1]&&this._disableNav("next");break}}}_disableNav(t){u('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){(function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),h=1;h<n;h++)i[h-1]=arguments[h];t.length?t.forEach(l=>{l.classList.remove(...i)}):t.classList.remove(...i)})(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:t,nextHtml:n}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${t}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${n}</div>`}get isNavIsFunction(){let{navTitles:t}=this.opts;return Object.keys(t).find(n=>typeof t[n]=="function")}}var ge={today:{content:c=>c.locale.today,onClick:c=>c.setViewDate(new Date)},clear:{content:c=>c.locale.clear,onClick:c=>c.clear()}};class Me{constructor(t){let{dp:n,opts:i}=t;this.dp=n,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=g({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:t}=this.opts;Array.isArray(t)||(t=[t]),t.forEach(n=>{let i=n;typeof n=="string"&&ge[n]&&(i=ge[n]);let h=this.createButton(i);i.onClick&&this.attachEventToButton(h,i.onClick),this.$el.appendChild(h)})}attachEventToButton(t,n){t.addEventListener("click",()=>{n(this.dp)})}createButton(t){let{content:n,className:i,tagName:h="button",attrs:l={}}=t;return g({tagName:h,innerHtml:`<span tabindex='-1'>${typeof n=="function"?n(this.dp):n}</span>`,className:I("air-datepicker-button",i),attrs:l})}render(){this.generateButtons()}}function R(c,t,n){return(t=function(i){var h=function(l,o){if(typeof l!="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,"string");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i);return typeof h=="symbol"?h:String(h)}(t))in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}class Ee{constructor(){let{opts:t,dp:n}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};R(this,"toggleTimepickerIsActive",h=>{this.dp.timepickerIsActive=h}),R(this,"onChangeSelectedDate",h=>{let{date:l,updateTime:o=!1}=h;l&&(this.setMinMaxTime(l),this.setCurrentTime(!!o&&l),this.addTimeToDate(l))}),R(this,"onChangeLastSelectedDate",h=>{h&&(this.setTime(h),this.render())}),R(this,"onChangeInputRange",h=>{let l=h.target;this[l.getAttribute("name")]=l.value,this.updateText(),this.dp.trigger(s.eventChangeTime,{hours:this.hours,minutes:this.minutes})}),R(this,"onMouseEnterLeave",h=>{let l=h.target.getAttribute("name"),o=this.$minutesText;l==="hours"&&(o=this.$hoursText),o.classList.toggle("-focus-")}),R(this,"onFocus",()=>{this.toggleTimepickerIsActive(!0)}),R(this,"onBlur",()=>{this.toggleTimepickerIsActive(!1)}),this.opts=t,this.dp=n;let{timeFormat:i}=this.dp.locale;i&&(i.match(ce("h"))||i.match(ce("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let t="input";navigator.userAgent.match(/trident/gi)&&(t="change"),V(this.$ranges,t,this.onChangeInputRange),V(this.$ranges,"mouseenter",this.onMouseEnterLeave),V(this.$ranges,"mouseleave",this.onMouseEnterLeave),V(this.$ranges,"focus",this.onFocus),V(this.$ranges,"mousedown",this.onFocus),V(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=g({className:I("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(s.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(s.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:t,hours:n,displayHours:i,minutes:h,minHours:l,minMinutes:o,maxHours:d,maxMinutes:f,dayPeriod:b,opts:{hoursStep:y,minutesStep:w}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${L(i)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${L(h)}</span>   `+(t?`<span class='air-datepicker-time--current-ampm'>${b}</span>`:"")+`</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">      <input type="range" name="hours" value="${n}" min="${l}" max="${d}" step="${y}"/>   </div>   <div class="air-datepicker-time--row">      <input type="range" name="minutes" value="${h}" min="${o}" max="${f}" step="${w}"/>   </div></div>`}defineDOM(){let t=n=>u(n,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=t('[name="hours"]'),this.$minutes=t('[name="minutes"]'),this.$hoursText=t(".air-datepicker-time--current-hours"),this.$minutesText=t(".air-datepicker-time--current-minutes"),this.$ampm=t(".air-datepicker-time--current-ampm")}setTime(t){this.setMinMaxTime(t),this.setCurrentTime(t)}addTimeToDate(t){t&&(t.setHours(this.hours),t.setMinutes(this.minutes))}setMinMaxTime(t){if(this.setMinMaxTimeFromOptions(),t){let{minDate:n,maxDate:i}=this.dp;n&&T(t,n)&&this.setMinTimeFromMinDate(n),i&&T(t,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(t){let{hours:n,minutes:i}=t?v(t):this;this.hours=J(n,this.minHours,this.maxHours),this.minutes=J(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:t,minMinutes:n,maxHours:i,maxMinutes:h}=this.opts;this.minHours=J(t,0,23),this.minMinutes=J(n,0,59),this.maxHours=J(i,0,23),this.maxMinutes=J(h,0,59)}setMinTimeFromMinDate(t){let{lastSelectedDate:n}=this.dp;this.minHours=t.getHours(),n&&n.getHours()>t.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=t.getMinutes()}setMaxTimeFromMaxDate(t){let{lastSelectedDate:n}=this.dp;this.maxHours=t.getHours(),n&&n.getHours()<t.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=t.getMinutes()}updateSliders(){C(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,C(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=L(this.displayHours),this.$minutesText.innerHTML=L(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(t){this._hours=t;let{hours:n,dayPeriod:i}=M(t);this.displayHours=this.ampm?n:t,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function W(c,t,n){return(t=function(i){var h=function(l,o){if(typeof l!="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,"string");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i);return typeof h=="symbol"?h:String(h)}(t))in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}class Te{constructor(t){let{dp:n,opts:i}=t;W(this,"pressedKeys",new Set),W(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],h=>h.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],h=>h.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],h=>h.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],h=>h.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],h=>h.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],h=>h.year-=10],[["Control","Shift","ArrowUp"],(h,l)=>l.up()]])),W(this,"handleHotKey",h=>{let l=this.hotKeys.get(h),o=v(this.getInitialFocusDate());l(o,this.dp);let{year:d,month:f,date:b}=o,y=D(new Date(d,f));y<b&&(b=y);let w=this.dp.getClampedDate(new Date(d,f,b));this.dp.setFocusDate(w,{viewDateTransition:!0})}),W(this,"isHotKeyPressed",()=>{let h=!1,l=this.pressedKeys.size,o=d=>this.pressedKeys.has(d);for(let[d]of this.hotKeys){if(h)break;if(Array.isArray(d[0]))d.forEach(f=>{h||l!==f.length||(h=f.every(o)&&d)});else{if(l!==d.length)continue;h=d.every(o)&&d}}return h}),W(this,"isArrow",h=>h>=37&&h<=40),W(this,"onKeyDown",h=>{let{key:l,which:o}=h,{dp:d,dp:{focusDate:f},opts:b}=this;this.registerKey(l);let y=this.isHotKeyPressed();if(y)return h.preventDefault(),void this.handleHotKey(y);if(this.isArrow(o))return h.preventDefault(),void this.focusNextCell(l);if(l==="Enter"){if(d.currentView!==b.minView)return void d.down();if(f){let w=d._checkIfDateIsSelected(f);return void(w?d._handleAlreadySelectedDates(w,f):d.selectDate(f))}}l==="Escape"&&this.dp.hide()}),W(this,"onKeyUp",h=>{this.removeKey(h.key)}),this.dp=n,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:t}=this.dp;t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:t}=this.dp;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:t,currentView:n,selectedDates:i,parsedViewDate:{year:h,month:l}}=this.dp,o=t||i[i.length-1];if(!o)switch(n){case s.days:o=new Date(h,l,new Date().getDate());break;case s.months:o=new Date(h,l,1);break;case s.years:o=new Date(h,0,1)}return o}focusNextCell(t){let n=this.getInitialFocusDate(),{currentView:i}=this.dp,{days:h,months:l,years:o}=s,d=v(n),f=d.year,b=d.month,y=d.date;switch(t){case"ArrowLeft":i===h&&(y-=1),i===l&&(b-=1),i===o&&(f-=1);break;case"ArrowUp":i===h&&(y-=7),i===l&&(b-=3),i===o&&(f-=4);break;case"ArrowRight":i===h&&(y+=1),i===l&&(b+=1),i===o&&(f+=1);break;case"ArrowDown":i===h&&(y+=7),i===l&&(b+=3),i===o&&(f+=4)}let w=this.dp.getClampedDate(new Date(f,b,y));this.dp.setFocusDate(w,{viewDateTransition:!0})}registerKey(t){this.pressedKeys.add(t)}removeKey(t){this.pressedKeys.delete(t)}}let Le={on(c,t){this.__events||(this.__events={}),this.__events[c]?this.__events[c].push(t):this.__events[c]=[t]},off(c,t){this.__events&&this.__events[c]&&(this.__events[c]=this.__events[c].filter(n=>n!==t))},removeAllEvents(){this.__events={}},trigger(c){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.__events&&this.__events[c]&&this.__events[c].forEach(h=>{h(...n)})}};function _(c,t,n){return(t=function(i){var h=function(l,o){if(typeof l!="object"||l===null)return l;var d=l[Symbol.toPrimitive];if(d!==void 0){var f=d.call(l,"string");if(typeof f!="object")return f;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(l)}(i);return typeof h=="symbol"?h:String(h)}(t))in c?Object.defineProperty(c,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):c[t]=n,c}let Q="",B="",ue=!1;class G{static buildGlobalContainer(t){ue=!0,Q=g({className:t,id:t}),u("body").appendChild(Q)}constructor(t,n){var i=this;if(_(this,"viewIndexes",[s.days,s.months,s.years]),_(this,"next",()=>{let{year:o,month:d}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(o,d+1,1));break;case s.months:this.setViewDate(new Date(o+1,d,1));break;case s.years:this.setViewDate(new Date(o+10,0,1))}}),_(this,"prev",()=>{let{year:o,month:d}=this.parsedViewDate;switch(this.currentView){case s.days:this.setViewDate(new Date(o,d-1,1));break;case s.months:this.setViewDate(new Date(o-1,d,1));break;case s.years:this.setViewDate(new Date(o-10,0,1))}}),_(this,"_finishHide",()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)}),_(this,"setPosition",function(o){let d=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof(o=o||i.opts.position)=="function")return void(i.customHide=o({$datepicker:i.$datepicker,$target:i.$el,$pointer:i.$pointer,isViewChange:d,done:i._finishHide}));let f,b,{isMobile:y}=i.opts,w=i.$el.getBoundingClientRect(),$=i.$el.getBoundingClientRect(),k=i.$datepicker.offsetParent,O=i.$el.offsetParent,x=i.$datepicker.getBoundingClientRect(),ne=o.split(" "),X=window.scrollY,ee=window.scrollX,K=i.opts.offset,oe=ne[0],me=ne[1];if(y)i.$datepicker.style.cssText="left: 50%; top: 50%";else{if(k===O&&k!==document.body&&($={top:i.$el.offsetTop,left:i.$el.offsetLeft,width:w.width,height:i.$el.offsetHeight},X=0,ee=0),k!==O&&k!==document.body){let le=k.getBoundingClientRect();$={top:w.top-le.top,left:w.left-le.left,width:w.width,height:w.height},X=0,ee=0}switch(oe){case"top":f=$.top-x.height-K;break;case"right":b=$.left+$.width+K;break;case"bottom":f=$.top+$.height+K;break;case"left":b=$.left-x.width-K}switch(me){case"top":f=$.top;break;case"right":b=$.left+$.width-x.width;break;case"bottom":f=$.top+$.height-x.height;break;case"left":b=$.left;break;case"center":/left|right/.test(oe)?f=$.top+$.height/2-x.height/2:b=$.left+$.width/2-x.width/2}i.$datepicker.style.cssText=`left: ${b+ee}px; top: ${f+X}px`}}),_(this,"_setInputValue",()=>{let{opts:o,$altField:d,locale:{dateFormat:f}}=this,{altFieldDateFormat:b,altField:y}=o;y&&d&&(d.value=this._getInputValue(b)),this.$el.value=this._getInputValue(f)}),_(this,"_getInputValue",o=>{let{selectedDates:d,opts:f}=this,{multipleDates:b,multipleDatesSeparator:y}=f;if(!d.length)return"";let w=typeof o=="function",$=w?o(b?d:d[0]):d.map(k=>this.formatDate(k,o));return $=w?$:$.join(y),$}),_(this,"_checkIfDateIsSelected",function(o){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.days,f=!1;return i.selectedDates.some(b=>{let y=T(o,b,d);return f=y&&b,y}),f}),_(this,"_scheduleCallAfterTransition",o=>{this._cancelScheduledCall(),o&&o(!1),this._onTransitionEnd=()=>{o&&o(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})}),_(this,"_cancelScheduledCall",()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)}),_(this,"setViewDate",o=>{if(!((o=P(o))instanceof Date)||T(o,this.viewDate))return;let d=this.viewDate;this.viewDate=o;let{onChangeViewDate:f}=this.opts;if(f){let{month:b,year:y}=this.parsedViewDate;f({month:b,year:y,decade:this.curDecade})}this.trigger(s.eventChangeViewDate,o,d)}),_(this,"setFocusDate",function(o){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!o||(o=P(o))instanceof Date)&&(i.focusDate=o,i.opts.range&&o&&i._handleRangeOnFocus(),i.trigger(s.eventChangeFocusDate,o,d))}),_(this,"setCurrentView",o=>{if(this.viewIndexes.includes(o)){if(this.currentView=o,this.elIsInput&&this.visible&&this.setPosition(void 0,!0),this.trigger(s.eventChangeCurrentView,o),!this.views[o]){let d=this.views[o]=new z({dp:this,opts:this.opts,type:o});this.shouldUpdateDOM&&this.$content.appendChild(d.$el)}this.opts.onChangeView&&this.opts.onChangeView(o)}}),_(this,"_updateLastSelectedDate",o=>{this.lastSelectedDate=o,this.trigger(s.eventChangeLastSelectedDate,o)}),_(this,"destroy",()=>{let{showEvent:o,isMobile:d}=this.opts,f=this.$datepicker.parentNode;f&&f.removeChild(this.$datepicker),this.$el.removeEventListener(o,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),d&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts=null,this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=null,this.rangeDateFrom=null,this.rangeDateTo=null}),_(this,"update",function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=re({},i.opts);re(i.opts,o);let{timepicker:f,buttons:b,range:y,selectedDates:w,isMobile:$}=i.opts,k=i.visible||i.treatAsInline;i._createMinMaxDates(),i._limitViewDateByMaxMinDates(),i._handleLocale(),!d.selectedDates&&w&&i.selectDate(w),o.view&&i.setCurrentView(o.view),i._setInputValue(),d.range&&!y?(i.rangeDateTo=!1,i.rangeDateFrom=!1):!d.range&&y&&i.selectedDates.length&&(i.rangeDateFrom=i.selectedDates[0],i.rangeDateTo=i.selectedDates[1]),d.timepicker&&!f?(k&&i.timepicker.destroy(),i.timepicker=!1,i.$timepicker.parentNode.removeChild(i.$timepicker)):!d.timepicker&&f&&i._addTimepicker(),!d.buttons&&b?i._addButtons():d.buttons&&!b?(i.buttons.destroy(),i.$buttons.parentNode.removeChild(i.$buttons)):k&&d.buttons&&b&&i.buttons.clearHtml().render(),!d.isMobile&&$?(i.treatAsInline||B||i._createMobileOverlay(),i._addMobileAttributes(),i.visible&&i._showMobileOverlay()):d.isMobile&&!$&&(i._removeMobileAttributes(),i.visible&&(B.classList.remove("-active-"),typeof i.opts.position!="function"&&i.setPosition())),k&&(i.nav.update(),i.views[i.currentView].render(),i.currentView===s.days&&i.views[i.currentView].renderDayNames())}),_(this,"isOtherMonth",o=>{let{month:d}=v(o);return d!==this.parsedViewDate.month}),_(this,"isOtherYear",o=>{let{year:d}=v(o);return d!==this.parsedViewDate.year}),_(this,"isOtherDecade",o=>{let{year:d}=v(o),[f,b]=H(this.viewDate);return d<f||d>b}),_(this,"_onChangeSelectedDate",o=>{let{silent:d}=o;setTimeout(()=>{this._setInputValue(),this.opts.onSelect&&!d&&this._triggerOnSelect()})}),_(this,"_onChangeFocusedDate",function(o){let{viewDateTransition:d}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!o)return;let f=!1;d&&(f=i.isOtherMonth(o)||i.isOtherYear(o)||i.isOtherDecade(o)),f&&i.setViewDate(o),i.opts.onFocus&&i.opts.onFocus({datepicker:i,date:o})}),_(this,"_onChangeTime",o=>{let{hours:d,minutes:f}=o,b=new Date,{lastSelectedDate:y,opts:{onSelect:w}}=this,$=y;y||($=b);let k=this.getCell($,this.currentViewSingular),O=k&&k.adpCell;O&&O.isDisabled||($.setHours(d),$.setMinutes(f),y?(this._setInputValue(),w&&this._triggerOnSelect()):this.selectDate($))}),_(this,"_onFocus",o=>{this.visible||this.show()}),_(this,"_onBlur",o=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()}),_(this,"_onMouseDown",o=>{this.inFocus=!0}),_(this,"_onMouseUp",o=>{this.inFocus=!1,this.$el.focus()}),_(this,"_onResize",()=>{this.visible&&typeof this.opts.position!="function"&&this.setPosition()}),_(this,"_onClickOverlay",()=>{this.visible&&this.hide()}),_(this,"getViewDates",function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:s.days;return z.getDatesFunction(o)(i)}),_(this,"isWeekend",o=>this.opts.weekends.includes(o)),_(this,"getClampedDate",o=>{let{minDate:d,maxDate:f}=this,b=o;return f&&j(o,f)?b=f:d&&Z(o,d)&&(b=d),b}),this.$el=u(t),!this.$el)return;this.$datepicker=g({className:"air-datepicker"}),this.opts=re({},m,n),this.$customContainer=!!this.opts.container&&u(this.opts.container),this.$altField=u(this.opts.altField||!1);let{view:h,startDate:l}=this.opts;l||(this.opts.startDate=new Date),this.$el.nodeName==="INPUT"&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=P(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=h,this.selectedDates=[],this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:t,treatAsInline:n,opts:{inline:i,isMobile:h,selectedDates:l,keyboardNav:o,onlyTimepicker:d}}=this,f=u("body");(!ue||ue&&Q&&!f.contains(Q))&&!i&&this.elIsInput&&!this.$customContainer&&G.buildGlobalContainer(G.defaultGlobalContainerId),!h||B||n||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),o&&!d&&(this.keyboardNav=new Te({dp:this,opts:t}))),l&&this.selectDate(l,{silent:!0}),this.opts.visible&&!n&&this.show(),h&&!n&&this.$el.setAttribute("readonly",!0),n&&this._createComponents()}_createMobileOverlay(){B=g({className:"air-datepicker-overlay"}),Q.appendChild(B)}_createComponents(){let{opts:t,treatAsInline:n,opts:{inline:i,buttons:h,timepicker:l,position:o,classes:d,onlyTimepicker:f,isMobile:b}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(o)),!i&&this.elIsInput||this.$datepicker.classList.add("-inline-"),d&&this.$datepicker.classList.add(...d.split(" ")),f&&this.$datepicker.classList.add("-only-timepicker-"),b&&!n&&this._addMobileAttributes(),this.views[this.currentView]=new z({dp:this,type:this.currentView,opts:t}),this.nav=new ke({dp:this,opts:t}),l&&this._addTimepicker(),h&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let t in this.views)this.views[t].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){B.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){B.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||this.initialReadonly===""||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:t,maxDate:n}=this.opts;this.minDate=!!t&&P(t),this.maxDate=!!n&&P(n)}_addTimepicker(){this.$timepicker=g({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new Ee({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=g({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new Me({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(s.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(s.eventChangeFocusDate,this._onChangeFocusedDate),this.on(s.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:t}=this.opts;var n,i;this.elIsInput?t?(n=this.$datepicker,(i=this.$el).parentNode.insertBefore(n,i.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=u(".air-datepicker--content",this.$datepicker),this.$pointer=u(".air-datepicker--pointer",this.$datepicker),this.$nav=u(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:t,dateFormat:n,firstDay:i,timepicker:h,onlyTimepicker:l,timeFormat:o,dateTimeSeparator:d}=this.opts;var f;this.locale=(f=t,JSON.parse(JSON.stringify(f))),n&&(this.locale.dateFormat=n),o!==void 0&&o!==""&&(this.locale.timeFormat=o);let{timeFormat:b}=this.locale;if(i!==""&&(this.locale.firstDay=i),h&&typeof n!="function"){let y=b?d:"";this.locale.dateFormat=[this.locale.dateFormat,b||""].join(y)}l&&typeof n!="function"&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(t){if(typeof t=="function")return void this.$datepicker.classList.add("-custom-position-");let n=(t=t.split(" "))[0],i=`air-datepicker -${n}-${t[1]}- -from-${n}-`;this.$datepicker.classList.add(...i.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:t,minDate:n,maxDate:i}=this;i&&j(t,i)&&this.setViewDate(i),n&&Z(t,n)&&this.setViewDate(n)}formatDate(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.viewDate,n=arguments.length>1?arguments[1]:void 0;if(t=P(t),!(t instanceof Date))return;let i=n,h=this.locale,l=v(t),o=l.dayPeriod,d=H(t),f=G.replacer,b={T:t.getTime(),m:l.minutes,mm:l.fullMinutes,h:l.hours12,hh:l.fullHours12,H:l.hours,HH:l.fullHours,aa:o,AA:o.toUpperCase(),E:h.daysShort[l.day],EEEE:h.days[l.day],d:l.date,dd:l.fullDate,M:l.month+1,MM:l.fullMonth,MMM:h.monthsShort[l.month],MMMM:h.months[l.month],yy:l.year.toString().slice(-2),yyyy:l.year,yyyy1:d[0],yyyy2:d[1]};for(let[y,w]of Object.entries(b))i=f(i,ce(y),w);return i}down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{currentView:h,parsedViewDate:l,selectedDates:o}=this,{updateTime:d}=i,{moveToOtherMonthsOnSelect:f,moveToOtherYearsOnSelect:b,multipleDates:y,range:w,autoClose:$,onBeforeSelect:k}=this.opts,O=o.length;if(Array.isArray(t))return t.forEach(x=>{this.selectDate(x,i)}),new Promise(x=>{setTimeout(x)});if((t=P(t))instanceof Date){if(k&&!k({date:t,datepicker:this}))return Promise.resolve();if(h===s.days&&t.getMonth()!==l.month&&f&&(n=new Date(t.getFullYear(),t.getMonth(),1)),h===s.years&&t.getFullYear()!==l.year&&b&&(n=new Date(t.getFullYear(),0,1)),n&&this.setViewDate(n),y&&!w){if(O===y)return;this._checkIfDateIsSelected(t)||o.push(t)}else if(w)switch(O){case 1:o.push(t),this.rangeDateTo||(this.rangeDateTo=t),j(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=t),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[t],this.rangeDateFrom=t,this.rangeDateTo="";break;default:this.selectedDates=[t],this.rangeDateFrom=t}else this.selectedDates=[t];return this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,silent:i?.silent,date:t,updateTime:d}),this._updateLastSelectedDate(t),$&&!this.timepickerIsActive&&this.visible&&(y||w?w&&O===1&&this.hide():this.hide()),new Promise(x=>{setTimeout(x)})}}unselectDate(t){let n=this.selectedDates,i=this;if((t=P(t))instanceof Date)return n.some((h,l)=>{if(T(h,t))return n.splice(l,1),i.selectedDates.length?i._updateLastSelectedDate(i.selectedDates[i.selectedDates.length-1]):(i.rangeDateFrom="",i.rangeDateTo="",i._updateLastSelectedDate(!1)),this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,date:t}),!0})}replaceDate(t,n){let i=this.selectedDates.find(l=>T(l,t,this.currentView)),h=this.selectedDates.indexOf(i);h<0||T(this.selectedDates[h],n,this.currentView)||(this.selectedDates[h]=n,this.trigger(s.eventChangeSelectedDate,{action:s.actionSelectDate,date:n,updateTime:!0}),this._updateLastSelectedDate(n))}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(s.eventChangeSelectedDate,{action:s.actionUnselectDate,silent:t.silent}),new Promise(n=>{setTimeout(n)})}show(){let{onShow:t,isMobile:n}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,t&&this._scheduleCallAfterTransition(t),n&&this._showMobileOverlay()}hide(){let{onHide:t,isMobile:n}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition(h=>{!this.customHide&&(h&&i||!h&&!i)&&this._finishHide(),t&&t(h)}),n&&B.classList.remove("-active-")}_triggerOnSelect(){let t=[],n=[],{selectedDates:i,locale:h,opts:{onSelect:l,multipleDates:o,range:d}}=this,f=o||d,b=typeof h.dateFormat=="function";i.length&&(t=i.map(de),n=b?o?h.dateFormat(t):t.map(y=>h.dateFormat(y)):t.map(y=>this.formatDate(y,h.dateFormat))),l({date:f?t:t[0],formattedDate:f?n:n[0],datepicker:this})}_handleAlreadySelectedDates(t,n){const{range:i,toggleSelected:h}=this.opts;let l=typeof h=="function"?h({datepicker:this,date:n}):h;i&&(l||this.selectedDates.length!==2&&this.selectDate(n)),l?this.unselectDate(n):this._updateLastSelectedDate(t)}_handleUpDownActions(t,n){if(!((t=P(t||this.focusDate||this.viewDate))instanceof Date))return;let i=n==="up"?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}_handleRangeOnFocus(){this.selectedDates.length===1&&(j(this.selectedDates[0],this.focusDate)?(this.rangeDateTo=this.selectedDates[0],this.rangeDateFrom=this.focusDate):(this.rangeDateTo=this.focusDate,this.rangeDateFrom=this.selectedDates[0]))}getCell(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s.day;if(!((t=P(t))instanceof Date))return;let{year:i,month:h,date:l}=v(t),o=`[data-year="${i}"]`,d=`[data-month="${h}"]`,f={[s.day]:`${o}${d}[data-date="${l}"]`,[s.month]:`${o}${d}`,[s.year]:`${o}`};return this.views[this.currentView].$el.querySelector(f[n])}_showMobileOverlay(){B.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce((t,n)=>parseFloat(n)+t,0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return v(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return H(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===s.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===s.days}get $container(){return this.$customContainer||Q}static replacer(t,n,i){return t.replace(n,function(h,l,o,d){return l+i+d})}}var ve;return _(G,"defaults",m),_(G,"version","3.4.0"),_(G,"defaultGlobalContainerId","air-datepicker-global-container"),ve=G.prototype,Object.assign(ve,Le),r.default}()})})(Ce);var ft=Ce.exports;const gt=Ie(ft);class vt{$container;timeOptions;airDatepicker;constructor(e,a){if(this.$container=E(`#${e}`),this.timeOptions=a,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){const a=`
      <div class="tournament-select-time">
        <h2 class="tournament-title-h2">
          Выберите дату и время проведения матчей
        </h2>
        <p class="tournament-select-time__description tournament-description">
          Равным образом реализация намеченных плановых заданий способствует подготовки и реализации соответствующий условий активизации.
        </p>
        <div class="tournament-select-time__controll">
          <div class="tournament-select-time__calendar" id="select-time-calendar"></div>
          <div class="tournament-select-time__line"></div>
          <div class="tournament-select-time__buttons">
            ${this.timeOptions.map((r,s)=>`
          <input id="selectTime${s+1}" name="selectTime" type="radio" class="tournament-radio-input" value="${r.value}" />
          <label class="tournament-radio-label" for="selectTime${s+1}">
            ${r.label}
          </label>
        `).join("")}
          </div>
        </div>
        <div class="tournament-select-time-error"></div>
      </div>
    `;this.$container.append(a),this.initializeCalendar()}initializeCalendar(){this.airDatepicker=new gt("#select-time-calendar",{startDate:Date.now(),dateFormat:"MMMM",range:!0})}getStartDate(){const e=this.airDatepicker.selectedDates[0],a=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${a}-${r}-${s}`}getEndDate(){const e=this.airDatepicker.selectedDates[1]??this.airDatepicker.selectedDates[0],a=e.getFullYear(),r=(e.getMonth()+1).toString().padStart(2,"0"),s=e.getDate().toString().padStart(2,"0");return`${a}-${r}-${s}`}getTimeValue(){const e=this.$container.find(".tournament-select-time__buttons").find("input[name='selectTime']:checked").val();return e||(console.error("No time option is selected."),null)}}class bt{$container;name;labelText;constructor(e,a,r){if(this.$container=E(`#${e}`),this.name=a,this.labelText=r,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){let e=this.labelText?`<div class="checkbox-swich__label-text">${this.labelText}</div>`:"";const a=`
      <div class="checkbox-swich">
        <label for="${this.name}" class="checkbox-swich__label">
          <input type="checkbox" name="${this.name}" id="${this.name}" class="checkbox-swich__input" />
          <div class="checkbox-swich__castom-checkbox checkbox-swich__castom-checkbox--checked">
            <div class="checkbox-swich__castom-checkbox-mark"></div>
          </div>
          ${e}
        </label>
      </div>
    `;this.$container.append(a)}isChecked(){return this.$container.find(`#${this.name}`).prop("checked")}}class yt{$container;checkboxSwitch;constructor(e){if(this.$container=E(`#${e}`),this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){const e="region-limit-switch",a=`
      <div class="page__tournament-region-limit tournament-region-limit">
        <div class="tournament-region-limit__switch" id="${e}"></div>
        <p class="tournament-region-limit__description tournament-description">
          Равным образом реализация намеченных плановых заданий способствует подготовке и реализации соответствующих условий активизации. Не следует, однако, забывать, что консультация с широким активом
        </p>
      </div>
    `;this.$container.append(a),this.checkboxSwitch=new bt(e,"regionLimit","Ограничить участие вашим регионом")}getValue(){return this.checkboxSwitch.isChecked()}}class wt{buttonText;buttonClasses;constructor(e,a){this.buttonText=e,this.buttonClasses=a}createButton(){return E("<button></button>").addClass(this.buttonClasses.join(" ")).text(this.buttonText)}renderButton(e){const a=E(`#${e}`),r=this.createButton();a.append(r)}}class Fe{validation;$mainContent;banner;tournamentNameInput;tournamentDescriptionInput;teamCountInput;entryRate;tournamentSelectTime;tournamentRegionLimit;buttonSubmit;constructor(e){if(this.$mainContent=E(`#${e}`),this.validation=new dt("#main-content"),this.$mainContent.length===0)throw new Error(`Main container with id #${e} not found.`);this.initializeCommonElements(),this.initializeSpecificElements(),this.initValidation()}initializeCommonElements(){const e=ct;this.banner=new ut("main-content",e),this.tournamentNameInput=new ye("main-content","Введите название турнира*","text","tournament-name","tournamentName"),this.tournamentDescriptionInput=new ye("main-content","Добавьте описание","text","tournament-description","tournamentDescription"),this.teamCountInput=new mt("main-content",[4,8,16,32]),this.entryRate=new pt("main-content",[{value:"1000",label:"1000 BS"},{value:"5000",label:"5000 BS"},{value:"10000",label:"10 000 BS"}]),this.tournamentSelectTime=new vt("main-content",[{value:"07:00:00.000",label:"7:00 AM"},{value:"12:00:00.000",label:"12:00 AM"},{value:"17:00:00.000",label:"5:00 PM"},{value:"22:00:00.000",label:"10:00 PM"},{value:"08:00:00.000",label:"8:00 AM"},{value:"13:00:00.000",label:"1:00 PM"},{value:"18:00:00.000",label:"6:00 PM"},{value:"22:30:00.000",label:"10:30 PM"},{value:"09:00:00.000",label:"9:00 AM"},{value:"14:00:00.000",label:"2:00 PM"},{value:"19:00:00.000",label:"7:00 PM"},{value:"23:00:00.000",label:"11:00 PM"},{value:"10:00:00.000",label:"10:00 AM"},{value:"15:00:00.000",label:"3:00 PM"},{value:"20:00:00.000",label:"8:00 PM"},{value:"23:30:00.000",label:"11:30 PM"},{value:"11:00:00.000",label:"11:00 AM"},{value:"16:00:00.000",label:"4:00 PM"},{value:"21:00:00.000",label:"9:00 PM"},{value:"12:00:00.000",label:"12:00 AM"}]),this.tournamentRegionLimit=new yt("main-content"),this.buttonSubmit=new wt("Опубликовать",["create-tournament__button","tournament-button"]),this.buttonSubmit.renderButton("main-content")}initValidation(){this.validation.addField("#tournament-name",[{rule:"required",errorMessage:"Введите название турнира*"}]).addRequiredGroup("#tournament-numbers-teams__buttons","Виберіть кількість команд",{tooltip:{position:"bottom"},errorsContainer:document.querySelector("#tournament-numbers-teams-error")}).addRequiredGroup(".tournament-select-time__buttons","Виберіть годину",{tooltip:{position:"bottom"},errorsContainer:document.querySelector(".tournament-select-time-error")})}}const Dt="/assets/cs2inter-cd8f1479.png";class $t extends Fe{mapsData;imgId=114;queryCreate=Ae;tournamentMaps;async initializeSpecificElements(){this.banner?.updateImage(Dt),this.mapsData=await De("https://battle-star-app.onrender.com/graphql",Oe,{},{Authorization:"Bearer f106222a0ebe66d3536b11a256411ce8688915767a986531a8119b7144733224cdb1dfdea426d492697a738b62fda5af3043a9a546bf6d015a55a3086bce0dbe32468dd8476b9d83754bbb3698f95e987e06053f91ceffc6655406c9ff3bc4c180331b03f83ab7c53c99354f8010b5497645ac3be6af33b25a0fe7a094aab9f9"});const e=this.mapsData.maps.data.map(a=>({id:a.id,value:a.attributes.name,label:a.attributes.name,imgSrc:a.attributes.logo.data[0].attributes.url}));this.tournamentMaps=new Ke("main-content",e),this.validation.addRequiredGroup(".tournament-maps__checkboxes","Виберіть карту",{tooltip:{position:"bottom"}}),this.validation.validate()}}class Ct{$container;options;constructor(e,a){if(this.$container=E(`#${e}`),this.options=a,this.$container.length===0)throw new Error(`Container with id #${e} not found.`);this.render()}render(){const a=`
      <div class="tournament-regime">
        <h2 class="tournament-regime__title tournament-title-h2">
          Режим:
        </h2>
        <div class="tournament-regime__buttons">
          ${this.options.map((r,s)=>`
      <input id="regime${s+1}" name="regime" type="radio" class="tournament-radio-input" value="${r.value}" />
      <label class="tournament-radio-label" for="regime${s+1}">
        ${r.label}
      </label>
    `).join("")}
        </div>
      </div>
    `;this.$container.append(a)}}class Ft extends Fe{imgId=116;queryCreate=Pe;initializeSpecificElements(){new Ct("main-content",[{value:"All Pick",label:"All Pick"},{value:"Single Draft",label:"Single Draft"},{value:"Captains Draft",label:"Captains Draft"},{value:"Captains Draft",label:"Captains Draft"},{value:"Random Draft",label:"Random Draft"},{value:"Turbo",label:"Turbo"},{value:"Least Played",label:"Least Played"},{value:"Limited Heroes",label:"Limited Heroes"},{value:"All Random",label:"All Random"},{value:"Captains Mode",label:"Captains Mode"},{value:"Ability Draft",label:"Ability Draft"},{value:"Deathmatch",label:"Deathmatch"}])}}class _t{static createPage(e,a){switch(e){case"Dota2":return new Ft(a);case"CS2":return new $t(a);default:throw new Error("Unknown game type")}}}E(document).ready(()=>{new Be("main");let p=_t.createPage("CS2","tournament-page");E(".create-tournament__button").on("click",function(){}),new Ge("tournament-page","Создание турнира","Равным образом реали зация нам еченных плановых зад аний спос обствует подгот овки и реали зации соотв етствующий усло вий акт ивизации. Не следу ет, одна ко забыв ать, что консул ьтация с ш ироким ак тивом ","Узнать больше"),new Ne("#wrapper"),new He("wrapper","ТУРНИРЫ"),E("#main-content").on("submit",()=>{if(p.validation.isValid){const e=document.getElementById("loadBanner");if(e&&e.files.length>0){const a=e.files[0],r=new FormData;r.append("files",a);const s="f106222a0ebe66d3536b11a256411ce8688915767a986531a8119b7144733224cdb1dfdea426d492697a738b62fda5af3043a9a546bf6d015a55a3086bce0dbe32468dd8476b9d83754bbb3698f95e987e06053f91ceffc6655406c9ff3bc4c180331b03f83ab7c53c99354f8010b5497645ac3be6af33b25a0fe7a094aab9f9",m="https://battle-star-app.onrender.com/api/upload";E.ajax({url:m,type:"POST",data:r,headers:{Authorization:`Bearer ${s}`},cache:!1,contentType:!1,processData:!1,success:function(u){console.log("File uploaded successfully:",u),we(p,u).then(g=>console.log(g))},error:function(u,g,C){console.error("Error uploading file:",g,C)}})}else we(p)}})});async function we(p,e){try{const a=e?e[0].id:p.imgId,r=await De("https://battle-star-app.onrender.com/graphql",p.queryCreate,{name:p.tournamentNameInput.getValue(),description:p.tournamentDescriptionInput.getValue(),maxTeams:p.teamCountInput.getSelectedValue(),moneyEntryRate:parseFloat(p.entryRate.getSelectedValue()),regionLimit:p.tournamentRegionLimit.getValue(),logoId:a,publishedAt:new Date().toISOString(),time:p.tournamentSelectTime.getTimeValue(),startDate:p.tournamentSelectTime.getStartDate(),endDate:p.tournamentSelectTime.getEndDate()},{Authorization:"Bearer f106222a0ebe66d3536b11a256411ce8688915767a986531a8119b7144733224cdb1dfdea426d492697a738b62fda5af3043a9a546bf6d015a55a3086bce0dbe32468dd8476b9d83754bbb3698f95e987e06053f91ceffc6655406c9ff3bc4c180331b03f83ab7c53c99354f8010b5497645ac3be6af33b25a0fe7a094aab9f9"});return r.errors?(console.error("GraphQL errors: ",r.errors),null):r.createCs2Tournament.data}catch(a){return console.error("Error in CreateCs2TournamentFunc: ",a),null}}
